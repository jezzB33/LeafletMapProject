<!DOCTYPE html>
<html>
<head>
  <title>Interactive Map with KML Layers</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Leaflet KML Plugin -->
  <script src="https://unpkg.com/leaflet-kml/leaflet-kml.js"></script>
  <style>
    #map {
      width: 100%;
      height: 600px;
    }
  </style>
</head>
<body>
  <h1>Interactive Map with KML Layers</h1>
  <div id="map"></div>
  <script>
    // Initialize the map
    var map = L.map('map').setView([51.505, -0.09], 13);

    // Add a tile layer (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19
    }).addTo(map);

    // Array of KML file paths
    var kmlFiles = [
      'Spruce Plantation.kml',
      'Scots Pine & Mixed Woodland.kml',
      'Hedge Row Development Areas 1.2.kml',
      'Hedge Row Development Areas 1.1.kml',
      'Hedge Row Development Areas 1.3.kml',
      'Monument Area.kml',
      'Nursery Park Woodland.kml',
      'Large Population Mixed Woodland.kml',
      'Crab Apple Plantation A.kml',
      'Crab Apple Plantation B.kml',
      'Hardy\'s Wall Woodland.kml',
      'Hardy\'s Wall Hedge Row.kml'
    ];

    // Object to store KML layers for the control
    var overlayLayers = {};

    // Loop through each KML file
    kmlFiles.forEach(function (filePath) {
      fetch(filePath)
        .then(response => response.text())
        .then(kmlText => {
          var parser = new DOMParser();
          var kmlDoc = parser.parseFromString(kmlText, 'text/xml');
          var kmlLayer = new L.KML(kmlDoc);

          // Add the layer to the map
          kmlLayer.addTo(map);

          // Add the layer to the overlayLayers object for control
          overlayLayers[filePath] = kmlLayer;

          // Fit the map bounds to include this layer
          var bounds = kmlLayer.getBounds();
          map.fitBounds(bounds);
        })
        .catch(error => console.error('Error loading KML file:', filePath, error));
    });

    // Add a layer control to the map
    L.control.layers(null, overlayLayers).addTo(map);

  </script>
</body>
</html>

